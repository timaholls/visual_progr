# Лабораторная работа 4.1 - WPF-приложение с использованием MVVM

## Описание задания

Данная лабораторная работа направлена на создание WPF-приложения для обработки данных по сотрудникам компании с использованием паттерна MVVM (Model-View-ViewModel). Приложение позволяет просматривать, добавлять, редактировать и удалять данные о сотрудниках и их должностях.

## Структура проекта

Проект реализован с использованием архитектуры MVVM, что обеспечивает четкое разделение бизнес-логики и пользовательского интерфейса. Структура проекта выглядит следующим образом:

```
4_1/
├── Model/                # Модели данных
│   ├── Person.cs         # Класс сотрудника
│   ├── Role.cs           # Класс должности
│   ├── PersonDPO.cs      # Класс отображения данных о сотруднике
│   └── FindRole.cs       # Класс для поиска должности
├── ViewModel/            # Модели представления
│   ├── ViewModelBase.cs  # Базовый класс для всех ViewModel
│   ├── PersonViewModel.cs # ViewModel для работы с сотрудниками
│   └── RoleViewModel.cs  # ViewModel для работы с должностями
└── View/                 # Представления (окна)
    ├── MainWindow.xaml   # Главное окно
    ├── WindowEmployee.xaml # Окно со списком сотрудников
    ├── WindowRole.xaml   # Окно со списком должностей
    ├── EditEmployeeWindow.xaml # Окно редактирования сотрудника
    └── EditRoleWindow.xaml # Окно редактирования должности
```

## Компоненты приложения

### Модели (Model)

#### Person.cs
Класс `Person` представляет сотрудника компании и содержит следующие свойства:
- `Id` - уникальный идентификатор
- `RoleId` - идентификатор должности
- `FirstName` - имя сотрудника
- `LastName` - фамилия сотрудника
- `Birthday` - дата рождения

#### Role.cs
Класс `Role` представляет должность и содержит следующие свойства:
- `Id` - уникальный идентификатор
- `NameRole` - наименование должности

#### PersonDPO.cs
Класс `PersonDPO` (Data Presentation Object) используется для отображения данных о сотруднике с указанием должности в виде строки (не ID):
- `Id` - уникальный идентификатор
- `Role` - название должности (строка)
- `FirstName` - имя сотрудника
- `LastName` - фамилия сотрудника
- `Birthday` - дата рождения

#### FindRole.cs
Класс `FindRole` предназначен для поиска должности по ID и содержит метод:
- `RolePredicate` - предикат для поиска должности

### Модели представления (ViewModel)

#### ViewModelBase.cs
Базовый класс для всех ViewModel, реализующий интерфейс `INotifyPropertyChanged` для уведомления UI об изменениях в свойствах:
- `PropertyChanged` - событие изменения свойства
- `OnPropertyChanged` - метод вызова события
- `SetProperty` - метод для установки значения свойства с вызовом события

#### PersonViewModel.cs
ViewModel для работы со списком сотрудников:
- `ListPerson` - коллекция сотрудников для отображения
- `Roles` - коллекция должностей
- `FillPersonDPO` - метод заполнения коллекции данными
- `GetNextPersonId` - метод получения следующего доступного ID
- `AddPerson` - добавление нового сотрудника
- `UpdatePerson` - обновление данных сотрудника
- `DeletePerson` - удаление сотрудника

#### RoleViewModel.cs
ViewModel для работы со списком должностей:
- `ListRole` - коллекция должностей
- `GetNextRoleId` - метод получения следующего доступного ID
- `AddRole` - добавление новой должности
- `UpdateRole` - обновление данных должности
- `DeleteRole` - удаление должности

### Представления (View)

#### MainWindow.xaml
Главное окно приложения с меню для перехода к управлению сотрудниками и должностями.

#### WindowEmployee.xaml
Окно со списком сотрудников, с возможностью добавления, редактирования и удаления:
- ListView для отображения списка сотрудников
- Кнопки для операций добавления, редактирования и удаления

#### WindowRole.xaml
Окно со списком должностей, с возможностью добавления, редактирования и удаления:
- ListView для отображения списка должностей
- Кнопки для операций добавления, редактирования и удаления

#### EditEmployeeWindow.xaml
Диалоговое окно для добавления или редактирования сотрудника:
- Поля для ввода имени, фамилии, выбора должности и даты рождения
- Кнопки сохранения и отмены

#### EditRoleWindow.xaml
Диалоговое окно для добавления или редактирования должности:
- Поле для ввода наименования должности
- Кнопки сохранения и отмены

## Функциональность приложения

### Управление сотрудниками
- Просмотр списка сотрудников с информацией о должности, имени, фамилии и дате рождения
- Добавление нового сотрудника через диалоговое окно
- Редактирование выбранного сотрудника через диалоговое окно
- Удаление выбранного сотрудника с подтверждением

### Управление должностями
- Просмотр списка должностей
- Добавление новой должности через диалоговое окно
- Редактирование выбранной должности через диалоговое окно
- Удаление выбранной должности с подтверждением

## Реализация MVVM паттерна

В данном приложении паттерн MVVM реализован следующим образом:

1. **Модель (Model)** - классы `Person`, `Role`, `PersonDPO` и `FindRole` содержат только данные и бизнес-логику.

2. **Представление (View)** - XAML-файлы и их code-behind, которые определяют UI и пользовательские взаимодействия.

3. **Модель представления (ViewModel)** - классы `PersonViewModel` и `RoleViewModel`, которые инкапсулируют логику представления и состояние, обеспечивают связь между моделью и представлением.

### Связывание данных
Для связывания данных используются:
- `ObservableCollection<T>` для коллекций, которые автоматически уведомляют UI об изменениях
- Интерфейс `INotifyPropertyChanged` для уведомления об изменениях в свойствах
- Привязки данных в XAML через атрибут `Binding`

## Как использовать приложение

1. При запуске открывается главное окно с меню
2. Выберите "Сотрудники" для работы со списком сотрудников или "Должности" для работы со списком должностей
3. Для добавления нажмите кнопку "Добавить"
4. Для редактирования выберите элемент в списке и нажмите "Редактировать"
5. Для удаления выберите элемент в списке и нажмите "Удалить"

## Технические особенности

- Приложение написано на C# с использованием WPF
- Поддерживает .NET 6.0
- Использует стандартные элементы управления WPF (ListView, GridView, DatePicker, ComboBox, etc.)
- Реализует паттерн MVVM для разделения ответственности 